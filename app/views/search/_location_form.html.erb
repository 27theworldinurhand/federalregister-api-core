<% form_for :conditions, search, :html => {:method => :get} do |f| %>
<h4>Near</h4>
<ul>
  <li class="location">
    <% if params[:conditions] %>
      <% params[:conditions].except(:location, :within).keys.each do |attr| %>
        <% if params[:conditions][attr].is_a?(Array)%>
          <% params[:conditions][attr].each do |val| %>
            <%= f.hidden_field attr, :id => '', :value => val, :multiple => true %>
          <% end %>
        <% else%>
          <%= f.hidden_field attr, :id => '' %>
        <% end %>
      <% end %>
    <% end %>
    <%= f.text_field :location, :placeholder =>  "Zip Code", :class => 'zip' %>
    <%= f.select :within, %w(5 10 25 50 100 200).map{|n| ["#{n} miles", n]} %>
    <%= f.submit 'Go', :class => 'submit' %>
  </li>
</ul>
<% end %>