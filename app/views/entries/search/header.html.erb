<% unless @search.valid? %>
  <ul class="errors">
    <% @search.errors.values.each do |err| %>
    <li><%= err %></li>
    <% end %>
  </ul>
<% end %>

<%= render :partial => "search/tabs", :locals => {:search => @search, :selected => :entries}%>

<div class="search_bar">
  <% semantic_form_for :conditions, @search, :url => entries_search_path, :html => {:method => :get, :id => "entry_search_form"}, :builder => ApplicationFormBuilder::Errorless do |f| %>
    <div class="simple">
      <label>Find</label>
      <%= f.text_field :term, :placeholder => 'Search term or citation' %>
      <%= f.submit 'Search' %>
      <span id="expected_result_count"></span>
      
      <div class="actions">
        <%= link_to 'Subscribe', entries_search_url(params.except(:action).merge(:format => :rss, :order => 'date', :publication_date_less_than => nil)  ), :class => 'rss' %>
        <%# link_to 'Widget', widget_instructions_path(params.except(:action, :controller)), :class => 'button widget spawn_modal notext', :id => 'widget' %>
      </div>
      
      <a title="Hide Advanced Search" data-state="open" id="toggle_advanced">Hide Advanced Search</a>
      
    </div>
    <div class="advanced">
      <%= render :partial => "advanced", :locals => {:f => f} %>
    </div>
  <% end %>
</div>
