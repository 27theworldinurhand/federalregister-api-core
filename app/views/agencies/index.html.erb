<% add_column_class('home') %>
<% title 'Agency List' %>

<h1 class="title"><span>Agency List</span></h1>

<div class="filters">
  <h4>Live Filter</h4>
  <ul>
    <li class="livesearch"><input title="Filter agencies"></li>  
  </ul>
    
  <h4>Alphabetical</h4>
  <ul class="filter">
    <li class="all on"><a href="#">ALL</a></li>    
    <li><a href="#">A-C</a></li>
    <li><a href="#">D</a></li>
    <li><a href="#">E-F</a></li>
    <li><a href="#">G-N</a></li>
    <li><a href="#">O-Z</a></li>
  </ul>
  
  <h4>Sub Agencies</h4>
  <ul class="sub_agencies">
    <li class="show on"><a href="#">Show</a></li>    
    <li class="hide"><a href="#">Hide</a></li>
  </ul>
  
</div>

<div class="result_set agency_list_container">

  <div class="titlebar agency_list_info">
    <div class="article_count">
      <h2 class="title_bar"><span class="small_stack">Agencies <span>Found</span></span> <span id="agency_count"><%= @agencies.count %></span></h2>
    </div>

    <ul class="ordering">

        <li class="on">
          <a class="" href="">Ascending</a>
        </li>
        <li class="">
          <a class="" href="">Descending</a>
        </li>
    </ul>
  </div>  
  
  <ul id="agency_list">
  <% @agencies.each do |agency|  %>
    <li><%= render :partial => 'agency_list_item', :locals => {:agency => agency} %>
      <% if agency.children.present? %>
        <ul>
          <% agency.children.each do |sub_agency| %>
            <li><%= render :partial => 'agency_list_item', :locals => {:agency => sub_agency} %></li>
          <% end %> 
        </ul>
      <% end %>
    </li>
  <% end %>
  </ul>
</div>